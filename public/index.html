

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Management</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <div class="head">
        <h1>Create User</h1>
      </div>
      <div class="form">
        <form id="userForm">
          <input
            type="text"
            id="firstName"
            name="firstName"
            placeholder="First Name"
            required
          />
          <input
            type="text"
            id="lastName"
            name="lastName"
            placeholder="Last Name"
            required
          />
          <input
            type="text"
            id="mobileNo"
            name="mobileNo"
            placeholder="Mobile Number"
            required
          />
          <input
            type="email"
            id="emailId"
            name="emailId"
            placeholder="Email"
            required
          />
          <input type="text" id="street" name="street" placeholder="Street" />
          <input type="text" id="city" name="city" placeholder="City" />
          <input type="text" id="state" name="state" placeholder="State" />
          <input
            type="text"
            id="country"
            name="country"
            placeholder="Country"
          />
          <input
            type="text"
            id="loginId"
            name="loginId"
            placeholder="Login ID"
            required
          />
          <input
            type="password"
            id="password"
            name="password"
            placeholder="Password"
            required
          />
          <button type="submit">Submit</button>
        </form>
      </div>
    </div>
    <script>
      // Event listener for form submission
      document
        .getElementById("userForm")
        .addEventListener("submit", async function (event) {
          event.preventDefault();

          const formData = {
            firstName: document.getElementById("firstName").value,
            lastName: document.getElementById("lastName").value,
            mobileNo: document.getElementById("mobileNo").value,
            emailId: document.getElementById("emailId").value,
            address: {
              street: document.getElementById("street").value,
              city: document.getElementById("city").value,
              state: document.getElementById("state").value,
              country: document.getElementById("country").value,
            },
            loginId: document.getElementById("loginId").value,
            password: document.getElementById("password").value,
          };

          try {
            const response = await fetch("http://localhost:5000/api/users", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(formData),
            });

            if (response.ok) {
              const user = await response.json();
              console.log("User created:", user);
              alert("User created successfully!");
            } else {
              const errorText = await response.text();
              console.error("Error:", errorText);
              alert("Error: " + errorText); // Display error message
            }
          } catch (error) {
            console.error("Request failed:", error);
            alert("Request failed: " + error.message); // Display error message
          }
        });
    </script>
  </body>
</html>
